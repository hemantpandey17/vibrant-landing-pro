
# Enable rewriting
RewriteEngine On

# Redirect all requests to index.html for SPA routing (except for existing files/directories)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.html [QSA,L]

# Set proper MIME types
<IfModule mod_mime.c>
  # JavaScript files
  AddType application/javascript .js
  AddType application/javascript .mjs
  AddType application/javascript .jsx
  AddType application/javascript .ts
  AddType application/javascript .tsx
  
  # JSON
  AddType application/json .json
  
  # CSS
  AddType text/css .css
  
  # Fonts
  AddType font/ttf .ttf
  AddType font/otf .otf
  AddType font/woff .woff
  AddType font/woff2 .woff2
  
  # Images
  AddType image/svg+xml .svg
  AddType image/png .png
  AddType image/jpeg .jpg .jpeg
  AddType image/gif .gif
  AddType image/webp .webp
</IfModule>

# Enable CORS
<IfModule mod_headers.c>
  <FilesMatch "\.(js|jsx|ts|tsx|json|css)$">
    Header set Access-Control-Allow-Origin "*"
  </FilesMatch>
</IfModule>

# Disable caching during development (remove or modify for production)
<IfModule mod_headers.c>
  <FilesMatch "\.(js|jsx|ts|tsx|json|css|html)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
  </FilesMatch>
</IfModule>

# Handle errors
ErrorDocument 404 /index.html
